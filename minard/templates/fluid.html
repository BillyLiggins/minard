{% extends "layout.html" %}
{% import 'histogram-chart.html' as histogram with context %}

{% block title %}Home{% endblock %}
{% block head %}
    {{ super() }}
    <style>

    .bars rect {
      fill: steelblue;
    }

    .axis text {
      font: 10px sans-serif;
    }

    .axis path, .axis line {
      fill: none;
      stroke: #000;
      shape-rendering: crispEdges;
    }

.x.axis line {
  shape-rendering: auto;
}

.line {
  fill: none;
  stroke: #000;
  stroke-width: 1.5px;
}


    </style>

    <script src="{{ url_for('static', filename='js/d3.js') }}"></script>
    <script src="{{ url_for('static', filename='js/histogram-chart.js') }}"></script>
    <script src="{{ url_for('static', filename='js/time-series.js') }}"></script>
    <script type="text/javascript">
      $SCRIPT_ROOT = {{ request.script_root|tojson|safe }};
    </script>
{% endblock %}
{% block body %}
    {{ super() }}
    <div class="container-fluid">
        <div class="row-fluid">
            <div class="span12">
                {% if containers %}
                {% for row in containers|batch(3) %}
                {% set row_loop = loop %}
                <div class="row-fluid">
                    {% for item in row %}
                    {% set divid = 'div' ~ row_loop.index ~ loop.index %}
                    <div class="span4" id="{{ divid }}">
                        <h2>{{ item.name }}</h2>
                        {% if item.type == 'histogram' %}
                        {{ histogram.histogram_chart(divid,url='get',name='test',interval=5000,bins=item.bins) }}
                        {% else %}
                        <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
                        <p><a class="btn" href="#">View details &raquo;</a></p>
                        {% endif %}
                    </div><!--/span-->
                    {% endfor %}
                </div><!--/row-->
                {% endfor %}
                {% endif %} <!-- containers -->
            </div><!--/.fluid-container-->
        </div>
    </div>

    <div id='test_timeseries'>
      <p> hello!
        </div>
      <script>
        alert($SCRIPT_ROOT);
        var ts = timeSeries('timeseries');
        d3.select('#test_timeseries').datum('test').call(ts);
        </script>

    <script>$('#nav-home').attr('class','active');</script>
{% endblock %}
</html>
