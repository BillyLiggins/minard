{% extends "layout.html" %}

{% block title %}Detector{% endblock %}
{% block head %}
    {{ super() }}

<style>
    .line {
      fill: none;
      stroke: #000;
      stroke-width: 1.5px;
    }

    .axis path, .axis line {
    fill: none;
    stroke: #000;
    shape-rendering: crispEdges;
    }

    .area {
    fill: #31a354;
    stroke: #000;
    stroke-width: 0;
    opacity: 0.25;
    }

    .title {
    line-height: 30px;
    }
</style>

{% endblock %}

{% block body %}
    {{ super() }}

<div class="container" id="main"></div>

<script src="{{ url_for('static', filename='js/d3.js') }}"></script>
<script src="{{ url_for('static', filename='js/time-series.js') }}"></script>

<script>
var n = 4;
for (var i=0; i < n; i++) {
    $('#main').append($('<center />').append($('<div class="col-md-12" />')));
}

var rand = d3.random.normal();

var data = [];
for (var i=0; i < 10; i++) {
    var j = data.push(Object());
    data[j-1].t = Date.now() - (10-i)*1000;
    data[j-1].y = rand();
}

var chart = timeSeries();

function update() {
    var j = data.push(Object());
    data[j-1].t = Date.now();
    data[j-1].y = rand();

    if (data.length > 100) {
        data.shift()
    }

    d3.selectAll('.col-md-12').data([data,data,data,data]).call(chart);
}

update();
setInterval(update,1000);
</script>

<script>$('#nav-time').attr('class','active');</script>

{% endblock %}
